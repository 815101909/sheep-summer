<!--pages/profile/profile.wxml-->
<!-- èƒŒæ™¯å±‚ -->
<view class="background-container {{themeClass}}">
  <image class="background-image" src="/assets/images/splash-bg.png" mode="aspectFill" />
</view>

<!-- ä¸»è¦å†…å®¹ -->
<view class="profile-content {{themeClass}}">
  <!-- å¤´åƒåŒºåŸŸ -->
  <view class="avatar-section">
    <!-- å½“å‰å¤´åƒ -->
    <view class="current-avatar-container">
      <image class="current-avatar" src="{{userAvatar || ''}}" mode="aspectFill" />

      <!-- ç”¨æˆ·åæ˜¾ç¤º/ç¼–è¾‘ -->
      <view wx:if="{{!isEditingName}}" class="name-edit-container" bindtap="onNameEdit">
        <text class="current-avatar-name">{{userName}}</text>
        <text class="edit-icon">âœï¸</text>
      </view>

      <!-- ç›´æ¥ç¼–è¾‘æ¨¡å¼ -->
      <view wx:if="{{isEditingName}}" class="name-edit-container">
        <input class="name-input-inline" value="{{tempUserName}}" bindinput="onNameInput" bindblur="onNameConfirm" bindconfirm="onNameConfirm" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" maxlength="20" focus="{{isEditingName}}" />
        <text class="edit-icon confirm-icon" bindtap="onNameConfirm">âœ“</text>
      </view>
    </view>

    <!-- å¤´åƒé€‰æ‹© -->
    <view class="avatar-choices">
      <view class="avatar-choice {{userAvatar === item.avatarUrl ? 'active' : ''}}" wx:for="{{avatarList}}" wx:key="avatarUrl" bindtap="selectAvatar" data-avatar="{{item.avatarUrl}}">
        <image class="choice-avatar" src="{{item.avatarUrl}}" mode="aspectFill" />
      </view>
    </view>
  </view>

  <!-- ä¿¡æ¯æ˜¾ç¤ºåŒºåŸŸ -->
  <view class="settings-section">
    <!-- æ‰‹æœºå· -->
    <view class="setting-item">
      <view class="setting-left">
        <text class="setting-icon">ğŸ“±</text>
        <text class="setting-text">æ‰‹æœºå·</text>
      </view>
      <text class="setting-value">{{userPhone}}</text>
    </view>

    <!-- ç”¨æˆ·ID -->
    <view class="setting-item">
      <view class="setting-left">
        <text class="setting-icon">ğŸ‘¤</text>
        <text class="setting-text">ç”¨æˆ·ID</text>
      </view>
      <text class="setting-value">{{userId}}</text>
    </view>
  </view>

  <!-- è®¾ç½®é€‰é¡¹ -->
  <view class="settings-section">
    <view class="setting-item">
      <view class="setting-left">
        <text class="setting-icon">ğŸŒ“</text>
        <text class="setting-text">ä¸»é¢˜æ¨¡å¼</text>
      </view>
      <picker mode="selector" range="{{themeOptions}}" value="{{themeModeIndex}}" bindchange="onThemeModeChange">
        <view class="setting-value">{{themeModeLabel}}</view>
      </picker>
    </view>
    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <view class="setting-item">
      <view class="setting-left">
        <text class="setting-icon">ğŸµ</text>
        <text class="setting-text">èƒŒæ™¯éŸ³ä¹</text>
      </view>
      <switch class="music-switch" checked="{{backgroundMusicEnabled}}" bindchange="onMusicToggle" />
    </view>

    <!-- é€€å‡ºç™»å½• -->
    <view class="setting-item logout-item" bindtap="onLogout">
      <view class="setting-center">
        <text class="setting-icon">ğŸšª</text>
        <text class="setting-text logout-text">é€€å‡ºç™»å½•</text>
      </view>
    </view>
  </view>
</view>

