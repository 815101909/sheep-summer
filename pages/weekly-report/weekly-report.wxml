<view class="weekly-container {{themeClass}}">
  <image class="page-bg" src="/assets/images/splash-bg.png" mode="aspectFill" />
  
  <view class="report-card {{themeClass}}">
    <!-- 头部区域：头像、问候语 -->
    <view class="card-header animate-item">
      <view class="avatar-box">
        <image class="avatar" src="{{userInfo.avatarUrl || '/assets/images/小卡片默认形象.png'}}" mode="aspectFill" />
      </view>
      <view class="header-text">
        <text class="greeting">Hi {{userInfo.name}}，见信如晤</text>
        <text class="sub-greeting">{{greeting}}</text>
      </view>
      <view class="date-badge">
        <text class="week-keyword">{{keyword}}</text>
      </view>
    </view>

    <!-- 标题区域 -->
    <view class="title-section animate-item">
      <text class="main-title">本周成长报告</text>
      <text class="date-range">{{weekRangeText}}</text>
    </view>

    <!-- 核心数据网格 -->
    <view class="stats-grid">
      <!-- 登录天数 -->
      <view class="stat-box login-box animate-item">
        <view class="stat-icon-bg">
          <image class="stat-icon" src="/assets/images/日历.png" mode="aspectFit" />
        </view>
        <view class="stat-content">
          <text class="stat-val">{{loginDaysThisWeek}}<text class="stat-unit">天</text></text>
          <text class="stat-name">陪伴时光</text>
        </view>
      </view>

      <!-- 收听数量 -->
      <view class="stat-box music-box animate-item">
        <view class="stat-icon-bg">
          <image class="stat-icon" src="/assets/images/music.png" mode="aspectFit" />
        </view>
        <view class="stat-content">
          <text class="stat-val">{{listenedCountThisWeek}}<text class="stat-unit">首</text></text>
          <text class="stat-name">收听治愈</text>
        </view>
      </view>

      <!-- 阅读数量 -->
      <view class="stat-box read-box animate-item">
        <view class="stat-icon-bg">
          <view class="stat-css-icon icon-read-book"></view>
        </view>
        <view class="stat-content">
          <text class="stat-val">{{readCountThisWeek}}<text class="stat-unit">篇</text></text>
          <text class="stat-name">阅读成长</text>
        </view>
      </view>

      <!-- 累计解锁 (替换勋章) -->
      <view class="stat-box medal-box animate-item">
        <view class="stat-icon-bg">
          <image class="stat-icon" src="/assets/images/盲盒.png" mode="aspectFit" />
        </view>
        <view class="stat-content">
          <text class="stat-val">{{unlockedTotal}}<text class="stat-unit">个</text></text>
          <text class="stat-name">累计解锁</text>
        </view>
      </view>
    </view>

    <!-- 总结信笺 -->
    <view class="summary-paper animate-item">
      <view class="paper-line"></view>
      <view class="paper-line"></view>
      <view class="paper-line"></view>
      
      <view class="summary-content">
        <view class="summary-paragraph">
          <view class="css-icon icon-time"></view>
          <text>这一周，我们一起度过了 {{loginDaysThisWeek}} 天的夏日时光。你沉浸在 {{listenedCountThisWeek}} 首旋律中，也在 {{readCountThisWeek}} 篇卡片里寻找力量。</text>
        </view>
        <view class="summary-paragraph" wx:if="{{longestSolitudeNote}}">
          <view class="css-icon icon-note"></view>
          <text>你在{{longestSolitudeDate}}留下了本周最长的独处心语：“{{longestSolitudeNote}}”。愿这片净土能永远守护你的内心宁静。</text>
        </view>
        <view class="summary-paragraph" wx:if="{{maxEnergyLevel > 0}}">
          <view class="css-icon icon-energy"></view>
          <text>本周能量值最高的一天是{{maxEnergyDate}}，达到了 {{maxEnergyLevel}} 星状态。愿你的每一天都充满活力！</text>
        </view>
        <view class="summary-paragraph" wx:if="{{unlockedTotal > 0}}">
          <view class="css-icon icon-medal"></view>
          <text>截止目前，你已解锁 {{unlockedTotal}} 个夏日形象，这是成长的印记。</text>
        </view>
        <view class="summary-footer">
          <text class="footer-text">—— 你的夏小咩</text>
          <image class="stamp" src="/assets/images/小绵羊.png" mode="aspectFit" />
        </view>
      </view>
    </view>

    <!-- 底部按钮 -->
    <view class="footer-actions animate-item">
      <button class="share-btn" open-type="share">分享我的夏天</button>
    </view>
  </view>
</view>
