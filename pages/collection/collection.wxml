<view class="collection-container">
  <!-- èƒŒæ™¯å›¾ç‰‡ -->
  <image class="page-bg" src="/assets/images/splash-bg.png" mode="aspectFill" />

  <!-- é¡µé¢å†…å®¹ -->
  <view class="collection-content">
    <!-- æ”¶è—ç»Ÿè®¡ -->
    <view class="stats-section">
      <view class="stat-item">
        <text class="stat-number">{{favoriteSongsCount}}</text>
        <text class="stat-label">éšèº«å¬</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{favoriteArticlesCount}}</text>
        <text class="stat-label">æˆé•¿å¡</text>
      </view>
    </view>

    <!-- æ ‡ç­¾é¡µåˆ‡æ¢ -->
    <view class="tab-section">
      <view class="tab-item {{activeTab === 'music' ? 'active' : ''}}" bindtap="switchTab" data-tab="music">
        <text class="tab-text">åˆæ˜¥ç‰§æ­Œ</text>
        <view class="tab-indicator" wx:if="{{activeTab === 'music'}}"></view>
      </view>
      <view class="tab-item {{activeTab === 'articles' ? 'active' : ''}}" bindtap="switchTab" data-tab="articles">
        <text class="tab-text">ä»²æ˜¥è¹„å°</text>
        <view class="tab-indicator" wx:if="{{activeTab === 'articles'}}"></view>
      </view>
    </view>

    <!-- ç”µå°æ”¶è—åˆ—è¡¨ -->
    <view class="list-section" wx:if="{{activeTab === 'music'}}">
      <view class="section-header">
        <text class="section-title">æ”¶è—çš„ç”µå°</text>
        <text class="section-count">å…± {{favoriteSongsCount}} é¦–</text>
      </view>

      <view class="empty-state" wx:if="{{favoriteSongs.length === 0}}">
        <text class="empty-icon">ğŸµ</text>
        <text class="empty-text">è¿˜æ²¡æœ‰æ”¶è—çš„ç”µå°</text>
        <text class="empty-desc">å»åˆæ˜¥ç‰§æ­Œé¡µé¢å‘ç°å–œæ¬¢çš„ç”µå°å§</text>
      </view>

      <view class="music-list" wx:else>
        <view class="music-item" wx:for="{{favoriteSongs}}" wx:key="songKey">
          <image class="music-cover" src="/assets/images/music.png" mode="aspectFit" />
          <view class="music-info">
            <text class="music-title">{{item.title}}</text>
            <text class="music-artist">{{item.artist}}</text>
          </view>
          <view class="play-btn" bindtap="playSong" data-song="{{item}}">
            <text class="play-icon"></text>
          </view>
        </view>
      </view>
    </view>

    <!-- çŸ¥è¯†æ”¶è—åˆ—è¡¨ -->
    <view class="list-section" wx:if="{{activeTab === 'articles'}}">
      <view class="section-header">
        <text class="section-title">æ”¶è—çš„çŸ¥è¯†</text>
        <text class="section-count">å…± {{favoriteArticlesCount}} ç¯‡</text>
      </view>

      <view class="empty-state" wx:if="{{favoriteArticles.length === 0}}">
        <text class="empty-icon">ğŸ“–</text>
        <text class="empty-text">è¿˜æ²¡æœ‰æ”¶è—çš„çŸ¥è¯†</text>
        <text class="empty-desc">å»ä»²æ˜¥è¹„å°é¡µé¢å‘ç°å–œæ¬¢çš„çŸ¥è¯†å§</text>
      </view>

      <view class="article-list" wx:else>
        <view class="film-card collection-card {{item.cardType === 'small' ? 'small-card' : 'main-card'}}" wx:for="{{favoriteArticles}}" wx:key="id" bindtap="readArticle" data-article="{{item}}">
          <view class="film-texture"></view>
          <view class="card-cover {{item.category === 'æ”¾æ¾' ? 'relax-cover' : ''}}">
            <image class="cover-image" src="{{item.cover || '/assets/images/default-cover.png'}}" mode="aspectFill" />
            <view class="card-bar">
              <text class="card-bar-text">{{ item.cardType === 'small' ? (item.subtitle || item.titleCn) : item.titleCn }}</text>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>


